<h3><%= @hike.name %></h3>

<div class='row'>
  <div class='col-md-4'>
    <p>
      Difficulty:
      <%= @hike.difficulty %>
    </p>
  </div>
  <div class='col-md-4'>
    <p>
      Distance:
      <%= @hike.length %> miles
    </p>
  </div>
  <div class='col-md-4'>
    <p>
      Elevation Gain:
      <%= @hike.elevation %> feet
    </p>
  </div>
</div>

<div class='row container-fluid'>
  <div class='col-md-6'>
    <%= image_tag @hike.image.url, class: 'show-image' %>
  </div>
  <div class='col-md-6'>
    <div id="map"></div>
    <script>
      function initMap() {
        var target = {lat: <%= @lat %>, lng: <%= @lng %>};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 11,
          center: target
        });
        var marker = new google.maps.Marker({
          position: target,
          map: map
        });
      }
    </script>
    <script async defer
    src='https://maps.googleapis.com/maps/api/js?key=AIzaSyCCHvwf-TfXUOU12tRKjippgOfqs5iVboM&callback=initMap'>
    </script>
  </div>
</div>

<h5>Description:</h5>

<p><%= @hike.description %></p>

<hr>

<div class='row'>
  <div class='col-md-6'>
    <h5>Reviews</h5>
  </div>
  <div class='col-md-6' id='add-review-button'>
    <%= link_to 'Add a Review', new_hike_review_path(@hike), class: 'btn btn-outline-primary' %>
  </div>
</div>

<% @hike.reviews.each do |review| %>
  <div class="card">
    <div class="card-header">
      <%= review.author %>
      <div id="review-rating">
        <%= review.rating %>/5
        <br>
        <%= review.created_at %>
      </div>
    </div>
    <div class="card-block">
      <p class="card-text"><%= review.content %></p>
      <% if current_user && (review.account_id == current_user.account.id) %>
        <%= link_to 'Edit', edit_hike_review_path(@hike, review), class: 'card-link' %>
      <% end %>
      <% if current_user && (review.account_id == current_user.account.id || current_user.admin) %>
        <%= link_to 'Delete', hike_review_path(@hike, review), method: 'delete', data: { confirm: 'Are you sure you want to delete your review?' }, class: 'card-link' %>
      <% end %>
    </div>
  </div>
<% end %>
